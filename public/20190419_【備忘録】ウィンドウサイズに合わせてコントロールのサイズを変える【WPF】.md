---
title: 【備忘録】ウィンドウサイズに合わせてコントロールのサイズを変える【WPF】
tags:
  - WPF
  - Xaml
private: false
updated_at: '2019-04-19T02:10:27+09:00'
id: 5e252e965259ce42269c
organization_url_name: null
slide: false
ignorePublish: false
---
かなりつまづいたので備忘録です。

#事象
まず、このようなアプリを作りました。
![image.png](https://qiita-image-store.s3.ap-northeast-1.amazonaws.com/0/176021/dd0e2907-107f-ae0a-c98c-aa83c58ce620.png)
この中央にあるListBoxを、ウィンドウのサイズに合わせてコントロールのサイズを変えたかったのですが・・・
![image.png](https://qiita-image-store.s3.ap-northeast-1.amazonaws.com/0/176021/f8e2d150-df2e-1497-38d7-c9117fa10104.png)
このようにListBoxが下にくっつかない(サイズが変わらない)や、それより下のコントロールがくっつかない現象が発生しました。
通常、以下のようにすれば自動的にサイズ調整してくれます。
![image.png](https://qiita-image-store.s3.ap-northeast-1.amazonaws.com/0/176021/159697af-4bd3-f906-7ae9-e043c64c4fed.png)

```xml
<ListBox Name="listBox1" Opacity="0.5" FontSize="16" TabIndex="3" Margin="10,10,10,13" Grid.RowSpan="7" Grid.ColumnSpan="3"/>
```

ですが、なぜかくっついてくれなかったので以下を試してみました。

#AnchorやDockを適応してみる
いわゆるWindowsFormsでいうAnchorやDockを適応してみます。
WPFにはAnchorなどのプロパティは存在しません。
そのため、ListBoxに以下を記述します。

```xml
<ListBox Name="listBox1" Opacity="0.5" FontSize="16" TabIndex="3" Margin="10,10,10,13" Grid.RowSpan="7" Grid.ColumnSpan="3" Width="Auto" Height="Auto" HorizontalAlignment="Stretch" VerticalAlignment="Stretch"/>
```

`Width` `Height`を`Auto`、
`HorizontalAlignment` `VerticalAlignment`を`Stretch`
で指定します。
そうすることで、外側のウィンドウの大きさに合わせてコントロールの大きさが変わるようになります。

###が、変化なし
これでも変化はなく、サイズを自動調整してくれませんでした。

#結局何がダメだったのか
今回のアプリは、Gridを使ってコントロールの位置を決めていました。
そこで私は、何もためらいもなく以下のようにGrid.RowDefinitionを指定してしまいました。

```xml
<Grid Margin="0,0,0,0">
        <Grid.RowDefinitions>
            <RowDefinition Height="50"/>
            <RowDefinition Height="50"/>
            <RowDefinition Height="50"/>
            <RowDefinition Height="50"/>
            <RowDefinition Height="50"/>
            <RowDefinition Height="50"/>
            <RowDefinition Height="50"/>
            <RowDefinition Height="30"/>
            <RowDefinition Height="30"/>
        </Grid.RowDefinitions>
　　　　　　　　　　　　︙
```

このように、**固定**にしてしまったわけです。
つまり、50ピクセル固定にしてしまったので、それ以上大きくならなかったわけですね。
**はい、私の凡ミスです。**いや、知らなかっただけなんですけどね、冷静に考えれば確かにそれ以上大きくならないのは当たり前でしょうけど・・・。

#結論
`RowDefinition`を自動調整したいので、ListBoxで指定している7番目の行を`Star`にします。
![image.png](https://qiita-image-store.s3.ap-northeast-1.amazonaws.com/0/176021/4fddfc2d-acfb-d0f7-2728-7d6d1e2526c7.png)

`Star`にすることでRowDefinitionが自動的にサイズ調整してくれます。
![image.png](https://qiita-image-store.s3.ap-northeast-1.amazonaws.com/0/176021/6a607521-4990-85e0-91cf-a1e0912b1ae9.png)

#まとめ
コントロールのサイズを自動調整させたい場合は、

* 自動的にサイズ調整してほしい方向にある`C`みたいなアイコンをクリックしてくっつける
* `RowDefinition`を固定にせず、`Star`にする(Grid？に限る)

#参考サイト
* [ウィンドウの幅や高さに合わせてコントロールのサイズを自動調整したい (autosize=true) (WPFプログラミング)](https://www.ipentec.com/document/wpf-layout-autosize-tips)
* [[WPFへの道 vol.2] AnchorやDockはどうするの？](https://blogs.msdn.microsoft.com/ttanaka/2010/11/02/wpf-vol-2-anchordock/)
* [Grid コントロール](http://www.kanazawa-net.ne.jp/~pmansato/wpf/wpf_layout_grid.htm)

#おまけ？
![image.png](https://qiita-image-store.s3.ap-northeast-1.amazonaws.com/0/176021/3c2e2028-741a-9f32-a762-29795a2850ab.png)

背景描いた人はこの人です:coffee:→ @Chino_Kafuu 

